<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta content="webkit" name="renderer"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width,initial-scale=1" name="viewport"/>
    <meta content="工具页面-词典" name="description"/>
    <title>工具页面-词典</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet"
          type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.45/vue.global.min.js"></script>
</head>
<body>
<section id="app" style="margin: 16px 12px 0;">
    <form @submit.prevent="doQuery" ref="dictForm" style="max-width: 420px;margin: 0 auto;">
        <div style="display: flex;justify-content: center;flex-wrap: wrap;margin-bottom: 8px;">
            <label style="display: flex;align-items: center;flex: 1 1;">
                <div style="white-space: nowrap;">输入(<u>W</u>)</div>
                <input accesskey="w" autocomplete="words" autofocus placeholder="输入查询的单词" required
                       style="margin: 0 8px;flex: 1 1;" v-model.trim="q">
            </label>

            <button accesskey="q" ref="submitBtn" style="flex-shrink: 0;" type="submit">查询(<u>Q</u>)</button>
        </div>

        <div style="display: flex;flex-wrap: wrap;justify-content: flex-start;">
            <div style="white-space: nowrap;margin-right: 8px;">选择网站(<u>S</u>)</div>
            <div style="display: flex;flex-wrap: wrap;">
                <label style="margin-right: 8px;white-space: nowrap;" v-for="(v, k) in links">
                    <input :title="k" :value="k" accesskey="s" name="dictSite" required type="radio"
                           v-model="currentQueryKey">
                    {{ k }}
                </label>
            </div>
            <!--<select :size="Object.keys(links).length" accesskey="s" required style="margin-left: 8px;"
                    v-model="currentQueryKey">
                <option :value="k" v-for="(v, k) in links">{{ k }}</option>
            </select>-->
        </div>

        <a :href="currentQuery" :target="currentQueryKey" hidden ref="queryLink" referrerpolicy="no-referrer"></a>
    </form>
</section>

<script>
    Vue.createApp({
        data: function () {
            return {
                links: {
                    '有道': query => `//dict.youdao.com/result?word=${query}&lang=en`,
                    '金山词霸': query => `//www.iciba.com/word?w=${query}`,
                    '剑桥': query => `//dictionary.cambridge.org/dictionary/english-chinese-simplified/${query}`,
                    '牛津': query => `//www.oxfordlearnersdictionaries.com/definition/english/${query}`,
                    '朗文': query => `//www.ldoceonline.com/dictionary/${query}`,
                },
                currentQueryKey: undefined,
                q: undefined,
            };
        },
        computed: {
            currentQuery() {
                return this.currentQueryKey && this.q && this.links[this.currentQueryKey](this.q);
            },
        },
        created() {
            this.currentQueryKey = Object.keys(this.links)[0];
        },
        methods: {
            doQuery() {
                this.$refs.queryLink.click();
                // window.open(this.currentQuery, this.currentQueryKey);
            }
        }
    }).mount('#app');
</script>
</body>
</html>
